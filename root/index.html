<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Landing Page</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>
<div class="nav-bar">
    <p>Animal10 Classifier API Test Page </p>
</div>
<div>
    <h1>Animal Prediction</h1>

    <input type="file" id="imageInput" accept=".jpeg, .jpg" />
    <button id="predictBtn">Predict</button>

    <p id="result"></p>
</div>
<script>

    const predictBtn = document.getElementById('predictBtn');
    if (predictBtn) {
        predictBtn.addEventListener('click', async () => {
            const input = document.getElementById('imageInput');
            if (!input || input.files.length === 0) {
                alert('Please select a JPEG image.');
                return;
            }

            const file = input.files[0];
            if (!file.type.startsWith('image/jpeg')) {
                alert('Please upload a JPEG image.');
                return;
            }

            const formData = new FormData();
            formData.append('image', file);

            try {
                const res = await fetch('https://animal-classifier-52010579282.northamerica-northeast1.run.app/predict', {
                    method: 'POST',
                    body: formData,
                });
                if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);
                const data = await res.json();
                const resultEl = document.getElementById('result');
                if (resultEl) {
                    resultEl.textContent = 'Predicted class: ' + data["Animal Prediction"];
                }
            } catch (error) {
                const resultEl = document.getElementById('result');
                if (resultEl) {
                    resultEl.textContent = 'Error: ' + error.message;
                }
            }
        });
    }
</script>


</body>
</html>