<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Landing Page</title>

</head>
<body>
<h1>API Test</h1>
<button id="callApi">Call Hello World API</button>
<p id="response"></p>

<h1>Upload JPEG for Prediction</h1>

<input type="file" id="imageInput" accept=".jpeg, .jpg" />
<button id="predictBtn">Predict</button>

<p id="result"></p>

<script>
    document.getElementById('callApi').addEventListener('click', async () => {
        try {
            const res = await fetch('https://animal-classifier-52010579282.northamerica-northeast1.run.app/hello_world');
            if (!res.ok) throw new Error('Network response was not ok');
            const data = await res.json();
            document.getElementById('response').textContent = data.message;
        } catch (error) {
            document.getElementById('response').textContent = 'Error: ' + error.message;
        }
    });

    document.getElementById('predictBtn').addEventListener('click', async () => {
      const input = document.getElementById('imageInput');
      if (input.files.length === 0) {
        alert('Please select a JPEG image.');
        return;
      }

      const file = input.files[0];
      if (!file.type.startsWith('image/jpeg')) {
        alert('Please upload a JPEG image.');
        return;
      }

      const formData = new FormData();
      formData.append('image', file);

      try {
        const res = await fetch('https://animal-classifier-52010579282.northamerica-northeast1.run.app/predict', {
          method: 'POST',
          body: formData,
        });
        if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);
        const data = await res.json();
        document.getElementById('result').textContent = 'Predicted class: ' + data["Animal Prediction"];
      } catch (error) {
        document.getElementById('result').textContent = 'Error: ' + error.message;
      }
    });
</script>


</body>
</html>